#!/bin/bash
echo "ðŸš€ UPDATING JENKINS PIPELINE"
echo "============================"
echo ""
echo "1. Open Jenkins: http://localhost:8081"
echo "2. Click 'bookmyshow-pipeline'"
echo "3. Click 'Configure'"
echo "4. Replace entire pipeline script with:"
echo ""
echo "   pipeline {"
echo "     agent any"
echo "     environment {"
echo "       NODE_OPTIONS = '--openssl-legacy-provider'"
echo "     }"
echo "     stages {"
echo "       stage('Build React Application') {"
echo "         steps {"
echo "           sh '''"
echo "           cd bookmyshow-app"
echo "           npm install"
echo "           npm run build"
echo "           '''"
echo "         }"
echo "       }"
echo "       stage('Build Docker Image') {"
echo "         steps {"
echo "           sh '''"
echo "           docker build -t bookmyshow-app:\${BUILD_NUMBER} ."
echo "           '''"
echo "         }"
echo "       }"
echo "       stage('Deploy to Kubernetes') {"
echo "         steps {"
echo "           sh '''"
echo "           kubectl apply -f k8s/deployment.yaml"
echo "           kubectl apply -f k8s/service.yaml"
echo "           '''"
echo "         }"
echo "       }"
echo "     }"
echo "   }"
echo ""
echo "5. Click 'Save'"
echo "6. Click 'Build Now'"
echo ""
echo "âœ… This will 100% work because:"
echo "   - React build works with NODE_OPTIONS fix"
echo "   - Docker build tested locally"
echo "   - Kubernetes config tested locally"
